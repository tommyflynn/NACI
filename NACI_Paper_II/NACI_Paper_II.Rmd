---
title: "Paper II: Network Analysis of Clinical Interactions"
author: Thomas Flynn
date: '`r format(Sys.Date())`'
output: 
  pdf_document:
    toc: true
---

# SETUP

```{r setup, include=TRUE}
library(knitr)
# set knit options
knitr::opts_chunk$set(echo = TRUE,
                      warning = FALSE,
                      message = FALSE,
                      collapse = TRUE)
library(tinytex)
# set tinytex output options (only for testing/debugging)
options(tinytex.verbose = TRUE)
library(ymlthis)
library(tidyverse)
library(lubridate)
# library(naniar) # for missing data
library(vtable) # makes good summary/descriptive statistics table
library(kableExtra)
library(readODS)
# create path to data directory
rdata_dir <- "/Users/tommy-two/Documents/1_Research/2_Data_Science/0_Projects/1_NACI/Data/Rdata"
```


```{r ymlthis, include = FALSE, eval=FALSE}
author_names <- tibble(name = c("Tommy J. Flynn^1^",
                                "Kate A. Yeager",
                                "Ymir Vigfusson^2^",
                                "David Wright^3^",
                                "Dian D. Evans",
                                "Bonnie Mowinski Jennings",
                                "Vicki Hertzberg"),
                       affiliation = c("^1^Emory University School of Nursing",
                                       "^2^Emory University Department of Computer Science",
                                       "^3^Emory University School of Medicine",
                                       NA_character_,
                                       NA_character_,
                                       NA_character_,
                                       NA_character_),
                       email = c("tommy.flynn@gmail.com",
                                 NA_character_,
                                 NA_character_,
                                 NA_character_,
                                 NA_character_,
                                 NA_character_,
                                 NA_character_))
author_names
yml() %>%
  yml_title("Network Analysis of Clinical Interactions: ED Network Structures and Patient Race") %>%
  yml_author(name = author_names$name,
             affiliation = author_names$affiliation,
             email = author_names$email) %>%
  # yml_date(lubridate::today()) %>%
  yml_abstract(c("__Background:__ The emergency department (ED) is a complex social setting in which clinical care and patients’ experiences depend on interpersonal encounters, or clinical interactions. Clinical interactions are multidimensional social phenomena embedded at the center of observable healthcare services. Clinical interactions are also one of the primary manifestations of healthcare disparities related to racism and discrimination. One roadblock to understanding the role of clinical interactions in ED disparities is a lack of methods available to study complex networks of interacting individuals. Social network analysis of close-proximity interactions data generated by real-time location systems is considered a powerful tool for studying social interactions. The purpose of this study is to describe a network analysis of clinical interactions (NACI) and the effects of patient race on structural network variables in an urban ED in the Southern United States.",
"__Method:__ This secondary analysis of clinical network data describes the ED clinical interactions for patients by self-identified race and gender groups. The Emory Institutional Review Board approved both the original study and this analysis. Radiofrequency identification (RFID) tags worn by consenting ED clinicians and patients were used to passively observe participants’ locations while in the ED. Location was identified every ten seconds for two randomly selected shifts per week over one year (July, 2009 through June, 2010). Clinical interactions were defined where two or more participants were in the same room and in close proximity (within 1m). Demographic and clinical data for the population and participants were pulled from medical records. Demographic information was not collected for ED staff other than job category (RN, MD, and Staff) to maintain participant confidentiality. ED staff were consented at the beginning of the study, and research staff intended to approach all patients as possible during the preselected shifts.",
"__Results:__ 104 shifts were randomly selected for observation, one day and one night shift per week, from a total of 730 shifts (two shifts per day for one year). 23 shifts were considered ineligible due to unforeseeable issues like equipment failure and sick research staff. From the remaining 81 shifts...")) %>% 
  yml_output(pdf_document()) %>%
  yml_citations(bibliography = "paperII_citations.bib")
                # csl = "apa.csl")
# draw_yml_tree()
```


# GOOGLE CLOUD  

```{r bigrquery}
library(bigrquery)
con <- DBI::dbConnect(
    bigrquery::bigquery(),
    project = "extended-tenure-345822",
    dataset = "naci_ed",
    billing = "tommy_billing"
)
coloc_df <- tbl(con, "colocation")

```

# NACI 

The emergency department (ED) is a complex social setting in which clinical care and patients’ experiences depend on interpersonal encounters, or clinical interactions. Clinical interactions are multidimensional social phenomena embedded at the center of observable healthcare services. Clinical interactions are also one of the primary manifestations of healthcare disparities related to racism and discrimination. One roadblock to understanding the role of clinical interactions in ED disparities is a lack of methods available to study complex networks of interacting individuals. Social network analysis of close-proximity interactions data generated by real-time location systems is considered a powerful tool for studying social interactions. The purpose of this study is to describe a network analysis of clinical interactions (NACI) and the effects of patient race on structural network variables in an urban ED in the Southern United States.

## Method: 

This secondary analysis and its parent study independently received ethics approval by institutional review board. Methods, including sampling strategy and data collection processes, were described previously [@lowery-north2013]. Data were generated passively with RFID sensors and participant-worn tags to map the clinical interaction network in the ED. The Emory Institutional Review Board approved both the original study and this analysis. Radiofrequency identification (RFID) tags worn by consenting ED clinicians and patients were used to passively observe participants’ locations while in the ED. Location was identified every ten seconds for two randomly selected shifts per week over one year (July, 2009 through June, 2010). Clinical interactions were defined where two or more participants were in the same room and in close proximity (within 1m). Demographic and clinical data for the population and participants were pulled from medical records. Demographic information was not collected for ED staff other than job category (RN, MD, and Staff) to maintain participant confidentiality. ED staff were consented at the beginning of the study, and research staff intended to approach all patients as possible during the preselected shifts. 



Understanding racial disparities in health and healthcare is an ongoing priority for health services research investigators and institutions 
[@nhqdr2019,  
AMA, 2021; 
National Institutes of Health, 2021a, 2021b; 
Newman et al., 2021 

Structural, cultural, and interpersonal factors lead to racial healthcare disparities. Racial healthcare disparities are “differences in the quality of healthcare that are not due to access-related factors or clinical needs, preferences, and appropriateness of intervention” 

Institute of Medicine, 2003, p. 4 

Clinical interactions (CIs) are interpersonal encounters in the process of healthcare process with at least two individuals. Upon presentation to the emergency department (ED), people seeking help are embedded in a complex network of clinical interactions involving every staff member, clinician, caregiver, and patient present. 

Network science draws on the perspectives, philosophies, and methods of various qualitative and quantitative research traditions to understand relationships between objects embedded in complex systems. 
Network analyses of clinical interactions (NACI) have become increasingly common in the health services research literature over the past few decades [@benton2015]. Health services researchers report correlations between hospitalizes patients’ clinical interaction network variables, cost of care, hospital characteristics, and patient demographics including age and sex [@abbasi2012]. 

Focusing a network science lens on clinical interactions in the complex emergency department (ED) environment may add to current evidence of the social and interpersonal dimensions of racial healthcare disparities. 
The purpose of this paper is to report a secondary data analysis of clinical interactions in the Emergency Department of a large academic hospital in the Southern U.S. using social network analyses of ED clinical interactions between patients and healthcare personnel. 

The meaning of network structures depends on researchers’ decisions about how to define individual actors (i.e., nodes) and their inter-relational connections (i.e., ties). In fact, the research question under investigation is considered the guiding force behind conceptual and operational interpretations of networks. Consider, for example, data from a novel contact tracing app designed to identify exposures. This hypothetical network would consist of all individuals with the app who are at risk of exposure (i.e., vertices, nodes, actors), their interactions with other nodes (i.e., ties, edges), and exposure status (i.e., node/vertex attribute). In this example, node nj’s risk of exposure increases in relation to the number of interactions nj has with others in the network. The relative number of interactions, or ties, nj has compared to others in the network is a basic measure of network centrality. As more attribute data are available, say vaccination status, the meaning of network structures, like centrality, must be reconsidered. When studying ED network data, we can assume that a tie between patient and clinician nodes is a part of service delivery: specifically, a patient-clinician interactions (i.e., clinical interactions). In some healthcare settings, clinical interactions are the building blocks of clinical relationships with broader implications for quality and equity. Clinical relationships are, however, beyond the purview of this paper. By defining network connections as clinician-patient interactions, its centrality is a measure of–at the least–quantity of direct clinical care, and–we hypothesize–important dimensions of quality clinical care like clinician-patient communication, changes in patient acuity, and ED throughput.



RFID systems are used in a number of hospitals nationwide 

(Page, 2007)

, commonly for supply chain management, passive patient identification, safe medication administration, patient tracking, and asset tracking 

(Yao et al., 2012)

. RFID systems consist of small tags or badges that emit radio-frequencies that are picked up by sensors located strategically so that every RFID badge is always identifiable to at least 3 sensors for location by triangulation 

(Yao et al., 2012).

The presence of RFID-enabled healthcare facilities nationwide will allow for replication of this research, and the evaluation of equity improvement interventions can be done with some minor alterations to existing hardware. Compared to other technologies used for locating resources, the inexpensive and unobtrusive design of RFID tags make them ideal for healthcare applications. Additionally, person-to-person proximity data, such as ours, is likely the most informative sensor-generated data for mapping and studying human networks 
(Pentland, 2012).

We report a secondary analysis of longitudinal ED contact network data. Data were collected previously using a prospective longitudinal observational study design. The purpose of the parent study was to describe contact characteristics among patients and staff in the ED of a busy urban hospital to help inform cross-infection control measures [@lowery-north2013].


### Sampling

Sampling strategies in network research are based on the research question [@borgatti2013]. Sampling strategies in network science defer to the boundaries of the network under investigation and the nature of the relationships between individual nodes [@borgatti2013]. 

Data were collected with a random sampling of one day shift and one night shift from a single academic urban ED every week over the course of one year. A total of 104 shifts of data were collected for the original study [@lowery-north2013]. Investigators chose this sampling strategy to minimize sampling bias related to variability in seasonal, weekly,and daily in census, acuity, and ED staffing patterns [@lowery-north2013]. 

Data points included detailed ED patient demographic and clinical information and basic information about clinicians. Clinicians were categorized into three professional groups; medical doctors (MD), registered nurses (RNs), and non-clinical staff. Patient data were collected for the following variables: race (Black, Hispanic, White, and other), sex, age, arrival mode (ambulatory, emergency medical transport, or in police custody), chief complaint, acuity (Emergency Severity Index), and disposition (admitted to hospital, discharged to community, left without being seen, or left against medical advice).

**_Acuity:_** Patient Acuity was measured in the parent study with the Emergency Severity Index (ESI) version 3. The ESI was designed to accurately predict ED patients’ resource needs and disposition [@tanabe2004, @tanabe2004b]. Each patient was assigned an ESI number on a scale of 1-5 by a triage nurse. Lower scores indicate more urgent patient needs, higher resource consumption, and greater likelihood of hospital admission [@tanabe2004]. The ESI has excellent interrater reliability and consistently predicts hospital admissions with the following rates: ESI 1 (80%), 2 (73%), 3 (51%), 4 (6%), and 5 (5%). In another study, patients with ESI levels 1-2 had higher rates of intensive care unit admissions more often than patients at levels 3-5 [@tanabe2004b]. A limitation of the ESI is its intended use as a one-time triage tool assessed at the beginning of patients' visits, though patients' condition may change.

### Data Sources

Original investigators collected data from three sources: patients' electronic health records (Cerner Millennium Electronic Health Record, Cerner Corp., Kansas City, MO), a radio-frequency identification system (Radianse Corp., Amherst, MA), and a tag identification database. 

### Analysis  

We used the R open-source statistical programming language [@r] with RStudio [@rstudio] for all statistical tests and python programming language for network analytics and visualizations. Empirical analysis of longitudinal network data begins with basic descriptive properties including two-dimensional network graphs and plots of basic network statistics. Stratification by racial/ethnic group, rather than risk-adjustment, has been shown to generate more informative results in recent studies of healthcare disparities [@profit2017].




## Results  


### Patient Sample  

Demographics for the whole ED patient population in the year in which data were collected were reported previously [@lowery-north2013]. In summary, the ED had `r n_patients_730` patient visits from July 2009 through June 2010 and `r n_patients_81` (`r round(n_patients_81/n_patients_730*100, 1)`%) visits during the 81 observed shifts. Of visits that occurred during the observed shifts, 34% (3112) were not approached by the research team, 16% (941) were excluded for reasons related to the patient (e.g., refused or unable to consent), and 6% (389) had technical issues which precluded inclusion. Data were, therefore, available for `r n_pt_sample` (`r round(n_pt_sample/n_patients_81*100, 1)`%) patients from 81 shifts, of which `r n_shift_sample` (`r round(n_shift_sample/n_pt_sample*100, 1)`%).

### Staff Sample1

88 (`r round(88/104*100, 1)`%) of 104 eligible staff consented to participate, and all `r n_staff_sample` (100%) of those were present during at least one of the 20 shifts sampled for this analysis [@lowery-north2013].

# METHODS  




